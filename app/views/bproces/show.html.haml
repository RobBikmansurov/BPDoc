%h3
  [
  = @bproce.shortname
  ]
%h2
  %b
    Название:
  = @bproce.name
-if @bproce.parent_id
  %h3
    Родительский процесс:
    -if can? :update, @bproce
      = link_to @bproce.parent.name, edit_bproce_path(@bproce.parent_id)
    -else
      = link_to @bproce.parent.name, bproce_path(@bproce.parent_id)
%h3
  %b
    Полное наименование:
  = @bproce.fullname
%h3
  %b
    Цель:
  = @bproce.goal
%hr
- if @bproce.business_roles.count > 0
  %h4
    В процессе участвуют
    = link_to 'Роли:', bproce_business_role_path(@bproce)
  - @bproce.business_roles.each do |business_role|
    -if can? :update, business_role
      = link_to business_role.name, edit_business_role_path(business_role)
    -else
      = link_to business_role.name, business_role_path(business_role)

-if @bproce.documents.count > 0
  %h4
    Процесс описывают
    =link_to 'Документы:', bproce_document_path(@bproce)
  -@bproce.documents.each do |doc|
    -if can? :update, doc
      = link_to doc.name, edit_document_path(doc)
    -else
      = link_to doc.name, document_path(doc)
    = ' ' + doc.approved.to_s

-if @bproce.workplaces.count > 0
  %h4
    В процессе участвуют
    =link_to 'Рабочие Места:', bproce_workplace_path(@bproce)
  -@bproce.workplaces.each do |wp|
    -if can? :update, wp
      = link_to wp.designation, edit_workplace_path(wp)
    -else
      = link_to wp.designation, workplace_path(wp)

- if !@bproce.bapps.empty?
  %h4
    В процессе используются
    =link_to 'Приложения:', bproce_bapp_path(@bproce)
  -@bproce.bapps.each do |ba|
    -if can? :update, ba
      = link_to ba.name, edit_bapp_path(ba)
    -else
      = link_to ba.name, bapp_path(ba)

%p
-if can? :update, Document
  .button
    = link_to 'Edit', edit_bproce_path(@bproce) |
.button
  = link_to 'Back', bproces_path
